"use strict";(self["webpackChunkvue_week_7"]=self["webpackChunkvue_week_7"]||[]).push([[866],{2866:function(t,s,e){e.r(s),e.d(s,{default:function(){return j}});var a=e(3396);function o(t,s,e,o,n,c){const i=(0,a.up)("BackNavbar"),l=(0,a.up)("ToastMessages"),r=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(i),(0,a.Wm)(l),n.checkSuccess?((0,a.wg)(),(0,a.j4)(r,{key:0})):(0,a.kq)("",!0)],64)}var n=e(5011),c=e(9242);const i={class:"navbar navbar-expand-lg navbar-dark bg-dark"},l={class:"container-fluid"},r=(0,a.Uk)("後台"),u=(0,a._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,a._)("span",{class:"navbar-toggler-icon"})],-1),h={class:"collapse navbar-collapse",id:"navbarNav"},d={class:"navbar-nav"},v={class:"nav-item"},p=(0,a.Uk)("產品"),g={class:"nav-item"},k=(0,a.Uk)("訂單"),m={class:"nav-item"};function b(t,s,e,o,n,b){const _=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("nav",i,[(0,a._)("div",l,[(0,a.Wm)(_,{class:"navbar-brand",to:"/admin"},{default:(0,a.w5)((()=>[r])),_:1}),u,(0,a._)("div",h,[(0,a._)("ul",d,[(0,a._)("li",v,[(0,a.Wm)(_,{to:"/admin/products",class:"nav-link"},{default:(0,a.w5)((()=>[p])),_:1})]),(0,a._)("li",g,[(0,a.Wm)(_,{to:"/admin/orders",class:"nav-link"},{default:(0,a.w5)((()=>[k])),_:1})]),(0,a._)("li",m,[(0,a._)("a",{href:"#",class:"nav-link",onClick:s[0]||(s[0]=(0,c.iM)(((...t)=>b.logout&&b.logout(...t)),["prevent"]))},"登出")])])])])])}var _={methods:{logout(){const t="https://vue3-course-api.hexschool.io/v2/logout";this.$http.post(t).then((()=>{alert("登出成功"),this.$router.push("/")})).catch((()=>{alert("登出失敗")}))}}},w=e(89);const f=(0,w.Z)(_,[["render",b]]);var $=f,y=e(7139);const C={class:"toast-container position-fixed pe-3 top-10 end-0",style:{"z-index":"1500"}},x={class:"toast-header"},T={class:"me-auto"},D=["onClick"],N={key:0,class:"toast-body"};function S(t,s,e,o,n,c){return(0,a.wg)(),(0,a.iD)("div",C,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.messages,((t,s)=>((0,a.wg)(),(0,a.iD)("div",{key:s,class:(0,y.C_)(["toast show",`toast${s}`]),role:"alert"},[(0,a._)("div",x,[(0,a._)("span",{class:(0,y.C_)([`bg-${t.style}`,"p-2 rounded me-2 d-inline-block"])},null,2),(0,a._)("strong",T,(0,y.zw)(t.title),1),(0,a._)("button",{type:"button",class:"btn-close",onClick:t=>c.clearToast(s),"data-bs-dismiss":"toast","aria-label":"Close"},null,8,D)]),t.content?((0,a.wg)(),(0,a.iD)("div",N,(0,y.zw)(t.content),1)):(0,a.kq)("",!0)],2)))),128))])}var W={data(){return{messages:[]}},inject:["emitter"],methods:{toastShow(){setTimeout((()=>{this.messages.shift()}),6e3)},clearToast(t){this.messages.splice(t,1)}},mounted(){this.emitter.on("push-message",(t=>{const{style:s="success",title:e,content:a}=t;this.messages.push({style:s,title:e,content:a}),this.toastShow()}))}};const z=(0,w.Z)(W,[["render",S]]);var Z=z,M={components:{BackNavbar:$,ToastMessages:Z},data(){return{checkSuccess:!1}},provide(){return{emitter:n.Z}},methods:{checkLogin(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");if(t){this.$http.defaults.headers.common.Authorization=t;const s="https://vue3-course-api.hexschool.io/v2/api/user/check";this.$http.post(s,{api_token:this.token}).then((()=>{this.checkSuccess=!0})).catch((t=>{alert(t.data.message),this.$router.push("/login")}))}else alert("您尚未登入"),this.$router.push("/login")}},mounted(){this.checkLogin()}};const U=(0,w.Z)(M,[["render",o]]);var j=U}}]);
//# sourceMappingURL=866.8e616f9f.js.map